# 为什么我只查询一行是语句，也执行这么慢

## 数据准备

``` sql
mysql> CREATE TABLE `t` (
  `id` int(11) NOT NULL,
  `c` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB;

delimiter ;;
create procedure idata()
begin
  declare i int;
  set i=1;
  while(i<=100000) do
    insert into t values(i,i);
    set i=i+1;
  end while;
end;;
delimiter ;

call idata();
```

## 查询长时间不返回

1. 等待 MDL 锁

2. 等 flush

3. 等行锁


## 查询慢-一致性读

> 坏查询不一定是慢查询