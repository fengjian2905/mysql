# 逻辑相同，性能千差万别

> 结论：对索引字段做函数操作，可能会破坏索引值的有序性，因此优化器就决定放弃走树搜索功能

## 情况一：索引字段上的函数操作

索引字段上使用函数，会使得优化器放弃树搜索功能，而遍历索引树  

表现上，虽然索引被使用，但是是遍历

## 情况二：隐式类型转换

索引类型是字符串，使用 int 作为搜索条件  

优化器会给索引字段增加一个转换函数，将 varchar 类型转换为 int，情况又变成了第一种 

## 情况三：隐式字符编码转换

两张字符编码不同的表进行关联查询  

被驱动表上的索引字段使用了函数，那么优化器会放弃走树搜索功能而遍历被驱动表  

utf8mb4 是 utf8 的超集  

通常优化器会自动加上 convert 函数，将字符编码转换为一致，情况又变成了第一种