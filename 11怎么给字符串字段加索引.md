# 怎么给字符串字段加索引

> 从空间和时间上来考虑与选择


## 完全字符串完整索引

1. 会导致索引字段占用的空间过大


## 前缀索引

1. 相对于完整索引，比较省空间
2. 如果前缀的区分度不高，会导致多次回表查询
3. 会使得覆盖索引失效，每次从索引树上获取主键ID后还是需要去回表查询，确认是否是完全匹配要查询的数据
4. 索引长度的设置判断公式：
   
   ``` sql
    select count(distinct(column)) from t
   ```

## 倒叙存储，索引前缀选择

1. 可以解决字符串前缀区分度不高的情况
2. 不支持范围查询

## hash字段存储，当做索引 crc32

1. 查询性能稳定，有额外存储和计算消耗
2. 不支持范围查询